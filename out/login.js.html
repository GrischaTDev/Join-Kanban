<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: login.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: login.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let loggedInUser = [];
let checkBoxLogin = false;

/**
 * Load registered users.
 */
function initLogin(){
    loadRegisteredUsers();
}


/**
 * Load registered users from server.
 */
async function loadRegisteredUsers(){
    try {
        users = JSON.parse(await getItem('users'));
    } catch(e){
        console.error('Loading error:', e);
    }
}


/**
 * Takes the value of the input fields and checks whether the user exists.
 */
async function login() {
    let loginEmail = document.getElementById('login-email').value;
    let loginPassword = document.getElementById('login-password').value;
    let user = users.find(u => u.email == loginEmail &amp;&amp; u.password == loginPassword);

    console.log('Benutzer', user);
    if (loginEmail == user.email &amp;&amp; loginPassword == user.password) {
        resetLoginForm(loginEmail, loginPassword);
        userPushLogin(user);
        location.href = './summary.html';
    } else {
        console.log('Falsche Eingabe')
        return
    }
}


/**
 * Clears the input fields after successful login.
 * 
 * @param {string} loginEmail - ID from email input field
 * @param {string} loginPassword - ID from password input field
 */
function resetLoginForm(loginEmail, loginPassword) {
    loginEmail = '';
    loginPassword = '';
}


/**
 * Saves the logged-in user as json in the local storage.
 * 
 * @param {JSON} user - Saved login user data
 */
async function userPushLogin(user) {
    loggedInUser.push({
      id: user.id,
      name: user.name,
      color: user.color
    });

    save();
}


/**
 * Saved login users in local storage.
 */
function save() {
    let loggedUSer = JSON.stringify(loggedInUser);
    localStorage.setItem('loggedInUser', loggedUSer);
}


/**
 * Saves the login data in the input fields.
 */
function rememberMe() {
    let checkBoxImage = document.getElementById('remember-me');

    if (!checkBoxLogin) {
      checkBoxImage.src = './assets/img/checkbox_active.svg';
      checkBoxLogin = true;
    } else {
      checkBoxImage.src = './assets/img/checkbox.svg';
      checkBoxLogin = false;
    }
}


/**
 * Login as guest user without registration.
 */
function guestLogIn() {
    document.getElementById('login-email').value = 'test-user@join.com';
    document.getElementById('login-password').value = 'xt8mnVL6t8i4f4N';
    loggedInUser.push({
        id: 99,
        name: 'Guest',
        color: 'rgb(222,222,69)'
        });
    location.href = './summary.html';
    save();
}



</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#clearAddContactInputfields">clearAddContactInputfields</a></li><li><a href="global.html#closeAddContactCard">closeAddContactCard</a></li><li><a href="global.html#closeEditContactCard">closeEditContactCard</a></li><li><a href="global.html#closeEditDeleteContactPopup">closeEditDeleteContactPopup</a></li><li><a href="global.html#closeShowContact">closeShowContact</a></li><li><a href="global.html#contact_list">contact_list</a></li><li><a href="global.html#declareInputs">declareInputs</a></li><li><a href="global.html#deleteSelectedContact">deleteSelectedContact</a></li><li><a href="global.html#doNotClose">doNotClose</a></li><li><a href="global.html#fillEditContactCardWithContactData">fillEditContactCardWithContactData</a></li><li><a href="global.html#generateContactDetailsHtml">generateContactDetailsHtml</a></li><li><a href="global.html#generateUniqueId">generateUniqueId</a></li><li><a href="global.html#getNewContactInformation">getNewContactInformation</a></li><li><a href="global.html#groupContactsByFirstLetter">groupContactsByFirstLetter</a></li><li><a href="global.html#guestLogIn">guestLogIn</a></li><li><a href="global.html#hideAddContactCardFromScreen">hideAddContactCardFromScreen</a></li><li><a href="global.html#hideContactCreatedConfirmation">hideContactCreatedConfirmation</a></li><li><a href="global.html#hideContactDeletedConfirmation">hideContactDeletedConfirmation</a></li><li><a href="global.html#hideEditCardFromScreen">hideEditCardFromScreen</a></li><li><a href="global.html#initContactList">initContactList</a></li><li><a href="global.html#initLogin">initLogin</a></li><li><a href="global.html#loadAllTasks">loadAllTasks</a></li><li><a href="global.html#loadContactList">loadContactList</a></li><li><a href="global.html#loadRegisteredUsers">loadRegisteredUsers</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#moveEditDeleteContactPopupFromScreenToRight">moveEditDeleteContactPopupFromScreenToRight</a></li><li><a href="global.html#openAddContactCard">openAddContactCard</a></li><li><a href="global.html#openEditContactCard">openEditContactCard</a></li><li><a href="global.html#openEditDeleteContactPopup">openEditDeleteContactPopup</a></li><li><a href="global.html#rememberMe">rememberMe</a></li><li><a href="global.html#removeAnimationsFromOpenAddContactCard">removeAnimationsFromOpenAddContactCard</a></li><li><a href="global.html#removeAnimationsFromOpenEditContactCard">removeAnimationsFromOpenEditContactCard</a></li><li><a href="global.html#renderContactDetails">renderContactDetails</a></li><li><a href="global.html#renderEditContactCard">renderEditContactCard</a></li><li><a href="global.html#renderEditDeleteContactPoup">renderEditDeleteContactPoup</a></li><li><a href="global.html#renderLetterbox">renderLetterbox</a></li><li><a href="global.html#renderSnippetBox">renderSnippetBox</a></li><li><a href="global.html#resetLoginForm">resetLoginForm</a></li><li><a href="global.html#save">save</a></li><li><a href="global.html#saveAddedContact">saveAddedContact</a></li><li><a href="global.html#saveEditedContact">saveEditedContact</a></li><li><a href="global.html#selectContact">selectContact</a></li><li><a href="global.html#selectedContactIfElseBranch">selectedContactIfElseBranch</a></li><li><a href="global.html#showContactCreatedConfirmation">showContactCreatedConfirmation</a></li><li><a href="global.html#showContactDeletedConfirmation">showContactDeletedConfirmation</a></li><li><a href="global.html#updateContact">updateContact</a></li><li><a href="global.html#userPushLogin">userPushLogin</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Mar 03 2024 22:53:30 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
